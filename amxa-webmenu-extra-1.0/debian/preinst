#!/bin/sh
# preinst script for amxa-webmenu-extra
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <new-preinst> `install'
#        * <new-preinst> `install' <old-version>
#        * <new-preinst> `upgrade' <old-version>
#        * <old-preinst> `abort-upgrade' <new-version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package


case "$1" in
    install|upgrade)
      for N in $(find /etc/webmenu/tab.d/ -name  \*yaml); do
        #for N in $(ls /etc/webmenu/tab.d/*yaml); do
        mv $N $N.opinsys
      done

      SRC="/opt/libreoffice5.2/share/xdg"
      DST="/usr/share/applications"
      LST="base calc draw math writer impress startcenter"

      for N in $LST; do
        S="$SRC/$N.desktop"
        D="$DST/libreoffice-$N.desktop"
        if test -h $D; then
          rm $D
        fi
        if test -e $S; then
          ln -s $S $D 
        fi
      done



    ;;

    abort-upgrade)
    ;;

    *)
        echo "preinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
